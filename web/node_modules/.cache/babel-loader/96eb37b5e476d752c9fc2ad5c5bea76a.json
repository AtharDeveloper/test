{"ast":null,"code":"import _objectSpread from \"/home/mohammad-saif/Desktop/demo_task/web/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport { Cookies } from 'react-cookie';\nimport CONSTANT from './constant';\nexport const setCookie = (cookieName, token) => {\n  const cookies = new Cookies();\n  cookies.set(cookieName, token, {\n    path: '/'\n  });\n};\nexport const getCookie = cookieName => {\n  const cookie = new Cookies();\n  const value = cookie.get(cookieName);\n  return value;\n};\nexport const getUserDetail = () => {\n  const token = getCookie(CONSTANT.cookie.token);\n  if (token) return JSON.parse(window.atob(token.split('.')[1]));else return {};\n};\nexport const removeAllCookies = () => {\n  const cookies = document.cookie.split(\";\");\n\n  for (const cookie of cookies) {\n    const eqPos = cookie.indexOf(\"=\");\n    const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n    document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n  }\n};\nexport const getStorage = keyName => {\n  const item = localStorage.getItem(keyName);\n  return JSON.parse(item);\n};\nexport const getAuthHeader = () => {\n  const token = getCookie(CONSTANT.cookie.token);\n  const header = {\n    headers: {\n      Authorization: \"Bearer \" + token\n    }\n  };\n  return header;\n};\nexport const onChange = (context, name, newValue, callback) => {\n  context.setState({\n    [name]: _objectSpread({}, context.state[name], {\n      value: newValue\n    })\n  }, callback && callback);\n};\nexport const setError = (context, name, error, callback) => {\n  context.setState({\n    [name]: _objectSpread({}, context.state[name], {\n      error\n    })\n  }, callback && callback);\n};\nexport const validateForm = context => {\n  const st = JSON.parse(JSON.stringify(context.state));\n  let status = true;\n\n  for (let key in st) {\n    if (st.hasOwnProperty(key) && st[key]) {\n      const name = st[key].name;\n      const isRequired = st[key].isRequired;\n      const value = st[key].value;\n\n      if (isRequired && value.length === 0) {\n        status = false;\n        setError(context, name, 'This field is required');\n      } else if (isRequired && value.length > 0) {\n        setError(context, name, '');\n      }\n    }\n  }\n\n  return status;\n};","map":{"version":3,"sources":["/home/mohammad-saif/Desktop/demo_task/web/src/utils.ts"],"names":["Cookies","CONSTANT","setCookie","cookieName","token","cookies","set","path","getCookie","cookie","value","get","getUserDetail","JSON","parse","window","atob","split","removeAllCookies","document","eqPos","indexOf","name","substr","getStorage","keyName","item","localStorage","getItem","getAuthHeader","header","headers","Authorization","onChange","context","newValue","callback","setState","state","setError","error","validateForm","st","stringify","status","key","hasOwnProperty","isRequired","length"],"mappings":"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","sourcesContent":["import { Cookies } from 'react-cookie';\nimport CONSTANT from './constant';\n\nexport const setCookie = (cookieName: string, token: any) => { \n    const cookies = new Cookies(); \n    cookies.set(cookieName, token, { path: '/' });\n};\n\nexport const getCookie = (cookieName: string) => {  \n    const cookie = new Cookies();\n    const value = cookie.get(cookieName);\n    return value;\n};\n\n\n\nexport const getUserDetail = () => {  \n    const token = getCookie(CONSTANT.cookie.token);\n    if(token)\n    return JSON.parse(window.atob(token.split('.')[1]));\n    else return {}\n}\n\nexport const removeAllCookies = () => {\n    const cookies = document.cookie.split(\";\");\n    for (const cookie of cookies) {\n        const eqPos = cookie.indexOf(\"=\");\n        const name = eqPos > -1 ? cookie.substr(0, eqPos) : cookie;\n        document.cookie = name + '=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;';\n    }\n};\n\nexport const getStorage = (keyName: string) => {  \n    const item: any = localStorage.getItem(keyName);\n    return JSON.parse(item);\n}\n\nexport const getAuthHeader = () => {  \n    const token = getCookie(CONSTANT.cookie.token);\n    const header = {\n        headers: { Authorization: \"Bearer \" + token }\n    };\n    return header;\n}\n\n\nexport const onChange = (context: any, name: string, newValue: any, callback?: any) => {  \n    context.setState({ [name]: { ...context.state[name], value: newValue } }, callback && callback);\n}\n\nexport const setError = (context: any, name: string, error: string, callback?: any) => {  \n    context.setState({ [name]: { ...context.state[name], error } }, callback && callback);\n}\n\nexport const validateForm = (context: any) => {  \n    const st = JSON.parse(JSON.stringify(context.state));\n    let status = true;\n    for (let key in st) {\n        if (st.hasOwnProperty(key) && st[key]) {\n            const name = st[key].name;\n            const isRequired = st[key].isRequired;\n            const value = st[key].value;\n\n            if (isRequired && value.length === 0) {\n                status = false;\n                setError(context, name, 'This field is required');\n            } else if (isRequired && value.length > 0) {\n                setError(context, name, '');\n            }\n        }\n    }\n    return status;\n}\n"]},"metadata":{},"sourceType":"module"}